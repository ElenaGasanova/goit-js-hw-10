{"version":3,"file":"commonHelpers.js","sources":["../src/js/1-timer.js"],"sourcesContent":["// Описан в документации\nimport flatpickr from 'flatpickr';\n// Дополнительный импорт стилей\nimport 'flatpickr/dist/flatpickr.min.css';\n// Описанный в документации\nimport iziToast from 'izitoast';\n// Дополнительный импорт стилей\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst inputEl = document.querySelector('#datetime-picker');\nconst startButton = document.querySelector('button');\nconst daysRef = document.querySelector('[data-days]');\nconst hoursRef = document.querySelector('[data-hours]');\nconst minutesRef = document.querySelector('[data-minutes]');\nconst secondsRef = document.querySelector('[data-seconds]');\n\nlet userSelectedDate = 0;\n\nconst options = {\n  enableTime: true,\n  time_24hr: true,\n  defaultDate: new Date(),\n  minuteIncrement: 1,\n  onClose(selectedDates) {\n    if (selectedDates[0].getTime() < Date.now()) {\n      iziToast.show({\n        message: `Please choose a date in the future`,\n        messageColor: 'White',\n        messageSize: '16px',\n        backgroundColor: 'red',\n        position: 'topRight',\n      });\n      startButton.setAttribute('disabled', '');\n    } else {\n      startButton.removeAttribute('disabled');\n    }\n  },\n};\n\nconst calendar = flatpickr('#datetime-picker', options);\nstartButton.addEventListener('click', onBtnClick);\n\nfunction onBtnClick() {\n  inputEl.setAttribute('disabled', '');\n  startButton.setAttribute('disabled', '');\n  const intervalId = setInterval(() => {\n    userSelectedDate = calendar.selectedDates[0].getTime() - Date.now();\n    const updatedTime = convertMs(userSelectedDate);\n\n    daysRef.textContent = addLeadingZero(updatedTime.days);\n    hoursRef.textContent = addLeadingZero(updatedTime.hours);\n    minutesRef.textContent = addLeadingZero(updatedTime.minutes);\n    secondsRef.textContent = addLeadingZero(updatedTime.seconds);\n\n    if (\n      daysRef.textContent === '00' &&\n      hoursRef.textContent === '00' &&\n      minutesRef.textContent === '00' &&\n      secondsRef.textContent === '00'\n    ) {\n      clearInterval(intervalId);\n    }\n  }, 1000);\n}\n\nfunction convertMs(ms) {\n  // Number of milliseconds per unit of time\n  const second = 1000;\n  const minute = second * 60;\n  const hour = minute * 60;\n  const day = hour * 24;\n\n  // Remaining days\n  const days = Math.floor(ms / day);\n  // Remaining hours\n  const hours = Math.floor((ms % day) / hour);\n  // Remaining minutes\n  const minutes = Math.floor(((ms % day) % hour) / minute);\n  // Remaining seconds\n  const seconds = Math.floor((((ms % day) % hour) % minute) / second);\n\n  return { days, hours, minutes, seconds };\n}\n\nfunction addLeadingZero(value) {\n  return String(value).padStart(2, '0');\n}\n// console.log(String(1));\n"],"names":["inputEl","startButton","daysRef","hoursRef","minutesRef","secondsRef","userSelectedDate","options","selectedDates","iziToast","calendar","flatpickr","onBtnClick","intervalId","updatedTime","convertMs","addLeadingZero","ms","days","hours","minutes","seconds","value"],"mappings":"8HASA,MAAMA,EAAU,SAAS,cAAc,kBAAkB,EACnDC,EAAc,SAAS,cAAc,QAAQ,EAC7CC,EAAU,SAAS,cAAc,aAAa,EAC9CC,EAAW,SAAS,cAAc,cAAc,EAChDC,EAAa,SAAS,cAAc,gBAAgB,EACpDC,EAAa,SAAS,cAAc,gBAAgB,EAE1D,IAAIC,EAAmB,EAEvB,MAAMC,EAAU,CACd,WAAY,GACZ,UAAW,GACX,YAAa,IAAI,KACjB,gBAAiB,EACjB,QAAQC,EAAe,CACjBA,EAAc,CAAC,EAAE,QAAO,EAAK,KAAK,OACpCC,EAAS,KAAK,CACZ,QAAS,qCACT,aAAc,QACd,YAAa,OACb,gBAAiB,MACjB,SAAU,UAClB,CAAO,EACDR,EAAY,aAAa,WAAY,EAAE,GAEvCA,EAAY,gBAAgB,UAAU,CAEzC,CACH,EAEMS,EAAWC,EAAU,mBAAoBJ,CAAO,EACtDN,EAAY,iBAAiB,QAASW,CAAU,EAEhD,SAASA,GAAa,CACpBZ,EAAQ,aAAa,WAAY,EAAE,EACnCC,EAAY,aAAa,WAAY,EAAE,EACvC,MAAMY,EAAa,YAAY,IAAM,CACnCP,EAAmBI,EAAS,cAAc,CAAC,EAAE,UAAY,KAAK,MAC9D,MAAMI,EAAcC,EAAUT,CAAgB,EAE9CJ,EAAQ,YAAcc,EAAeF,EAAY,IAAI,EACrDX,EAAS,YAAca,EAAeF,EAAY,KAAK,EACvDV,EAAW,YAAcY,EAAeF,EAAY,OAAO,EAC3DT,EAAW,YAAcW,EAAeF,EAAY,OAAO,EAGzDZ,EAAQ,cAAgB,MACxBC,EAAS,cAAgB,MACzBC,EAAW,cAAgB,MAC3BC,EAAW,cAAgB,MAE3B,cAAcQ,CAAU,CAE3B,EAAE,GAAI,CACT,CAEA,SAASE,EAAUE,EAAI,CAQrB,MAAMC,EAAO,KAAK,MAAMD,EAAK,KAAG,EAE1BE,EAAQ,KAAK,MAAOF,EAAK,MAAO,IAAI,EAEpCG,EAAU,KAAK,MAAQH,EAAK,MAAO,KAAQ,GAAM,EAEjDI,EAAU,KAAK,MAASJ,EAAK,MAAO,KAAQ,IAAU,GAAM,EAElE,MAAO,CAAE,KAAAC,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,CACxC,CAEA,SAASL,EAAeM,EAAO,CAC7B,OAAO,OAAOA,CAAK,EAAE,SAAS,EAAG,GAAG,CACtC"}